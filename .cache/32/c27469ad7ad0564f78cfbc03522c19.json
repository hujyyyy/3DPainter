{"id":"Iu2M","dependencies":[{"name":"/Users/hujy/GT/Spring20/3DU/3DPainter/node_modules/@babylonjs/core/Misc/workerPool.js.map","includedInParent":true,"mtime":1556745104000},{"name":"/Users/hujy/GT/Spring20/3DU/3DPainter/package.json","includedInParent":true,"mtime":1588539929318},{"name":"/Users/hujy/GT/Spring20/3DU/3DPainter/node_modules/@babylonjs/core/package.json","includedInParent":true,"mtime":1588537596306}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.WorkerPool=void 0;var e=function(){function e(e){this._pendingActions=new Array,this._workerInfos=e.map(function(e){return{worker:e,active:!1}})}return e.prototype.dispose=function(){for(var e=0,t=this._workerInfos;e<t.length;e++){t[e].worker.terminate()}delete this._workerInfos,delete this._pendingActions},e.prototype.push=function(e){for(var t=0,o=this._workerInfos;t<o.length;t++){var r=o[t];if(!r.active)return void this._execute(r,e)}this._pendingActions.push(e)},e.prototype._execute=function(e,t){var o=this;e.active=!0,t(e.worker,function(){e.active=!1;var t=o._pendingActions.shift();t&&o._execute(e,t)})},e}();exports.WorkerPool=e;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":20}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":43}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":56}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":64}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":92}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":94}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":98}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":100}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":111}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":120}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":1,"column":122}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":13,"column":12},"generated":{"line":1,"column":125}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":13,"column":12},"generated":{"line":1,"column":130}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":13,"column":30},"generated":{"line":1,"column":146}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":13,"column":34},"generated":{"line":1,"column":150}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":1,"column":156}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":1,"column":161}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":20,"column":28},"generated":{"line":1,"column":174}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":20,"column":36},"generated":{"line":1,"column":176}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":20,"column":40},"generated":{"line":1,"column":180}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":20,"column":41},"generated":{"line":1,"column":189}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":20,"column":53},"generated":{"line":1,"column":192}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":20,"column":53},"generated":{"line":1,"column":198}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":21,"column":12},"generated":{"line":1,"column":199}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":206}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":22,"column":12},"generated":{"line":1,"column":208}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":1,"column":216}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":64,"column":0},"generated":{"line":1,"column":221}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":1,"column":228}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":1,"column":230}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":1,"column":240}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":1,"column":248}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":259}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":263}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":267}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":269}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":271}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":273}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":38},"generated":{"line":1,"column":278}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":291}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":293}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":295}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":302}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":52},"generated":{"line":1,"column":306}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":29},"generated":{"line":1,"column":307}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":30,"column":29},"generated":{"line":1,"column":309}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":31,"column":23},"generated":{"line":1,"column":312}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":31,"column":30},"generated":{"line":1,"column":319}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":34,"column":15},"generated":{"line":1,"column":338}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":34,"column":20},"generated":{"line":1,"column":343}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":35,"column":15},"generated":{"line":1,"column":363}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":35,"column":20},"generated":{"line":1,"column":368}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":385}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":387}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":397}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":43,"column":4},"generated":{"line":1,"column":402}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":43,"column":16},"generated":{"line":1,"column":411}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":414}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":418}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":422}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":424}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":426}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":428}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":38},"generated":{"line":1,"column":433}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":446}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":448}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":450}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":33},"generated":{"line":1,"column":457}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":52},"generated":{"line":1,"column":461}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":1,"column":462}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":1,"column":466}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":29},"generated":{"line":1,"column":468}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":44,"column":29},"generated":{"line":1,"column":470}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":45,"column":16},"generated":{"line":1,"column":473}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":45,"column":17},"generated":{"line":1,"column":477}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":45,"column":28},"generated":{"line":1,"column":479}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":47,"column":16},"generated":{"line":1,"column":486}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":498}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":503}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":512}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":46,"column":42},"generated":{"line":1,"column":514}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":51,"column":13},"generated":{"line":1,"column":517}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":51,"column":13},"generated":{"line":1,"column":522}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":51,"column":29},"generated":{"line":1,"column":538}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":51,"column":34},"generated":{"line":1,"column":543}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":547}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":549}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":559}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":568}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":21},"generated":{"line":1,"column":577}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":45},"generated":{"line":1,"column":579}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":582}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":586}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":588}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":593}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":55,"column":19},"generated":{"line":1,"column":595}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":55,"column":28},"generated":{"line":1,"column":603}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":605}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":56,"column":15},"generated":{"line":1,"column":607}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":56,"column":26},"generated":{"line":1,"column":609}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":1,"column":616}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":627}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":57,"column":23},"generated":{"line":1,"column":629}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":57,"column":32},"generated":{"line":1,"column":637}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":58,"column":18},"generated":{"line":1,"column":639}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":58,"column":18},"generated":{"line":1,"column":643}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":58,"column":31},"generated":{"line":1,"column":645}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":58,"column":36},"generated":{"line":1,"column":647}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":58,"column":52},"generated":{"line":1,"column":663}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":59,"column":16},"generated":{"line":1,"column":671}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":60,"column":16},"generated":{"line":1,"column":674}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":60,"column":21},"generated":{"line":1,"column":676}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":60,"column":30},"generated":{"line":1,"column":685}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":60,"column":42},"generated":{"line":1,"column":687}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":64,"column":0},"generated":{"line":1,"column":693}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":695}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":698}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":706}},{"source":"../../../sourceES6/core/Misc/workerPool.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":717}}],"sources":{"../../../sourceES6/core/Misc/workerPool.ts":"import { IDisposable } from \"../scene\";\r\n\r\ninterface WorkerInfo {\r\n    worker: Worker;\r\n    active: boolean;\r\n}\r\n\r\n/**\r\n * Helper class to push actions to a pool of workers.\r\n */\r\nexport class WorkerPool implements IDisposable {\r\n    private _workerInfos: Array<WorkerInfo>;\r\n    private _pendingActions = new Array<(worker: Worker, onComplete: () => void) => void>();\r\n\r\n    /**\r\n     * Constructor\r\n     * @param workers Array of workers to use for actions\r\n     */\r\n    constructor(workers: Array<Worker>) {\r\n        this._workerInfos = workers.map((worker) => ({\r\n            worker: worker,\r\n            active: false\r\n        }));\r\n    }\r\n\r\n    /**\r\n     * Terminates all workers and clears any pending actions.\r\n     */\r\n    public dispose(): void {\r\n        for (const workerInfo of this._workerInfos) {\r\n            workerInfo.worker.terminate();\r\n        }\r\n\r\n        delete this._workerInfos;\r\n        delete this._pendingActions;\r\n    }\r\n\r\n    /**\r\n     * Pushes an action to the worker pool. If all the workers are active, the action will be\r\n     * pended until a worker has completed its action.\r\n     * @param action The action to perform. Call onComplete when the action is complete.\r\n     */\r\n    public push(action: (worker: Worker, onComplete: () => void) => void): void {\r\n        for (const workerInfo of this._workerInfos) {\r\n            if (!workerInfo.active) {\r\n                this._execute(workerInfo, action);\r\n                return;\r\n            }\r\n        }\r\n\r\n        this._pendingActions.push(action);\r\n    }\r\n\r\n    private _execute(workerInfo: WorkerInfo, action: (worker: Worker, onComplete: () => void) => void): void {\r\n        workerInfo.active = true;\r\n        action(workerInfo.worker, () => {\r\n            workerInfo.active = false;\r\n            const nextAction = this._pendingActions.shift();\r\n            if (nextAction) {\r\n                this._execute(workerInfo, nextAction);\r\n            }\r\n        });\r\n    }\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"abb13afa890fe19ef3829cc7a4a6e323","cacheData":{"env":{}}}