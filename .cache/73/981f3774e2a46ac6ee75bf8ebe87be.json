{"id":"dkO9","dependencies":[{"name":"/Users/hujy/GT/Spring20/3DU/3DPainter/node_modules/@babylonjs/core/Cameras/XR/webXRInput.js.map","includedInParent":true,"mtime":1556745103000},{"name":"/Users/hujy/GT/Spring20/3DU/3DPainter/package.json","includedInParent":true,"mtime":1588539929318},{"name":"/Users/hujy/GT/Spring20/3DU/3DPainter/node_modules/@babylonjs/core/package.json","includedInParent":true,"mtime":1588537596306},{"name":"../../Maths/math","loc":{"line":1,"column":35},"parent":"/Users/hujy/GT/Spring20/3DU/3DPainter/node_modules/@babylonjs/core/Cameras/XR/webXRInput.js","resolved":"/Users/hujy/GT/Spring20/3DU/3DPainter/node_modules/@babylonjs/core/Maths/math.js"},{"name":"../../Meshes/abstractMesh","loc":{"line":2,"column":29},"parent":"/Users/hujy/GT/Spring20/3DU/3DPainter/node_modules/@babylonjs/core/Cameras/XR/webXRInput.js","resolved":"/Users/hujy/GT/Spring20/3DU/3DPainter/node_modules/@babylonjs/core/Meshes/abstractMesh.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.WebXRInput=exports.WebXRController=void 0;var e=require(\"../../Maths/math\"),r=require(\"../../Meshes/abstractMesh\"),t=function(){function e(e){this.pointer=new r.AbstractMesh(\"controllerPointer\",e)}return e.prototype.dispose=function(){this.grip&&this.grip.dispose(),this.pointer.dispose()},e}();exports.WebXRController=t;var n=function(){function n(n){var o=this;this.helper=n,this.controllers=[],this._tmpMatrix=new e.Matrix,this._frameObserver=n._sessionManager.onXRFrameObservable.add(function(){if(n._sessionManager._currentXRFrame&&n._sessionManager._currentXRFrame.getDevicePose){var i=n._sessionManager._currentXRFrame;n._sessionManager._xrSession.getInputSources().forEach(function(a,s){var p=i.getInputPose(a,n._sessionManager._frameOfReference);if(p){o.controllers.length<=s&&o.controllers.push(new t(n.container.getScene()));var c=o.controllers[s];p.gripMatrix&&(c.grip||(c.grip=new r.AbstractMesh(\"controllerGrip\",n.container.getScene())),e.Matrix.FromFloat32ArrayToRefScaled(p.gripMatrix,0,1,o._tmpMatrix),c.grip.getScene().useRightHandedSystem||o._tmpMatrix.toggleModelMatrixHandInPlace(),c.grip.rotationQuaternion||(c.grip.rotationQuaternion=new e.Quaternion),o._tmpMatrix.decompose(c.grip.scaling,c.grip.rotationQuaternion,c.grip.position)),e.Matrix.FromFloat32ArrayToRefScaled(p.targetRay.transformMatrix,0,1,o._tmpMatrix),c.pointer.getScene().useRightHandedSystem||o._tmpMatrix.toggleModelMatrixHandInPlace(),c.pointer.rotationQuaternion||(c.pointer.rotationQuaternion=new e.Quaternion),o._tmpMatrix.decompose(c.pointer.scaling,c.pointer.rotationQuaternion,c.pointer.position)}})}})}return n.prototype.dispose=function(){this.controllers.forEach(function(e){e.dispose()}),this.helper._sessionManager.onXRFrameObservable.remove(this._frameObserver)},n}();exports.WebXRInput=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":20}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":43}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":56}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":64}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":87}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":95}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":116}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":118}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":122}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":124}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":132}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":152}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":154}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":162}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":191}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":193}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":204}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":213}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":215}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":26,"column":13},"generated":{"line":1,"column":218}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":26,"column":13},"generated":{"line":1,"column":223}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":26,"column":23},"generated":{"line":1,"column":231}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":26,"column":27},"generated":{"line":1,"column":235}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":26,"column":23},"generated":{"line":1,"column":237}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":26,"column":40},"generated":{"line":1,"column":250}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":26,"column":61},"generated":{"line":1,"column":270}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":37,"column":0},"generated":{"line":1,"column":273}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":280}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":282}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":292}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":300}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":32,"column":12},"generated":{"line":1,"column":311}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":32,"column":17},"generated":{"line":1,"column":316}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":33,"column":17},"generated":{"line":1,"column":322}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":33,"column":17},"generated":{"line":1,"column":327}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":33,"column":22},"generated":{"line":1,"column":332}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":35,"column":13},"generated":{"line":1,"column":342}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":35,"column":13},"generated":{"line":1,"column":347}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":35,"column":21},"generated":{"line":1,"column":355}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":37,"column":0},"generated":{"line":1,"column":366}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":368}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":371}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":379}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":395}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":397}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":401}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":403}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":414}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":423}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":31},"generated":{"line":1,"column":425}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":428}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":432}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":434}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":31},"generated":{"line":1,"column":439}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":31},"generated":{"line":1,"column":444}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":54,"column":31},"generated":{"line":1,"column":451}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":46,"column":11},"generated":{"line":1,"column":453}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":46,"column":11},"generated":{"line":1,"column":458}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":46,"column":49},"generated":{"line":1,"column":470}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":473}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":478}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":47,"column":25},"generated":{"line":1,"column":489}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":47,"column":29},"generated":{"line":1,"column":493}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":47,"column":25},"generated":{"line":1,"column":495}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":55,"column":13},"generated":{"line":1,"column":502}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":55,"column":13},"generated":{"line":1,"column":507}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":55,"column":30},"generated":{"line":1,"column":522}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":55,"column":37},"generated":{"line":1,"column":524}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":55,"column":53},"generated":{"line":1,"column":540}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":55,"column":73},"generated":{"line":1,"column":560}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":55,"column":77},"generated":{"line":1,"column":564}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":16},"generated":{"line":1,"column":575}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":17},"generated":{"line":1,"column":578}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":24},"generated":{"line":1,"column":580}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":40},"generated":{"line":1,"column":596}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":60},"generated":{"line":1,"column":613}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":67},"generated":{"line":1,"column":615}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":83},"generated":{"line":1,"column":631}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":99},"generated":{"line":1,"column":647}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":56,"column":16},"generated":{"line":1,"column":661}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":60,"column":16},"generated":{"line":1,"column":662}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":60,"column":16},"generated":{"line":1,"column":666}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":60,"column":26},"generated":{"line":1,"column":668}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":60,"column":33},"generated":{"line":1,"column":670}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":60,"column":49},"generated":{"line":1,"column":686}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":61,"column":31},"generated":{"line":1,"column":702}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":61,"column":38},"generated":{"line":1,"column":704}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":61,"column":54},"generated":{"line":1,"column":720}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":61,"column":65},"generated":{"line":1,"column":731}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":63,"column":25},"generated":{"line":1,"column":749}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":63,"column":33},"generated":{"line":1,"column":757}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":63,"column":34},"generated":{"line":1,"column":766}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":63,"column":41},"generated":{"line":1,"column":768}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":64,"column":20},"generated":{"line":1,"column":771}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":64,"column":20},"generated":{"line":1,"column":775}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":64,"column":32},"generated":{"line":1,"column":777}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":64,"column":40},"generated":{"line":1,"column":779}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":64,"column":53},"generated":{"line":1,"column":792}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":64,"column":60},"generated":{"line":1,"column":794}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":64,"column":67},"generated":{"line":1,"column":796}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":64,"column":83},"generated":{"line":1,"column":812}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":65,"column":20},"generated":{"line":1,"column":831}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":65,"column":20},"generated":{"line":1,"column":834}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":65,"column":31},"generated":{"line":1,"column":836}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":66,"column":24},"generated":{"line":1,"column":837}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":66,"column":29},"generated":{"line":1,"column":839}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":66,"column":41},"generated":{"line":1,"column":851}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":859}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":67,"column":24},"generated":{"line":1,"column":862}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":67,"column":29},"generated":{"line":1,"column":864}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":67,"column":41},"generated":{"line":1,"column":876}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":67,"column":46},"generated":{"line":1,"column":881}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":67,"column":50},"generated":{"line":1,"column":885}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":67,"column":66},"generated":{"line":1,"column":887}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":67,"column":73},"generated":{"line":1,"column":889}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":67,"column":83},"generated":{"line":1,"column":899}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":69,"column":24},"generated":{"line":1,"column":912}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":69,"column":24},"generated":{"line":1,"column":916}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":69,"column":37},"generated":{"line":1,"column":918}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":69,"column":42},"generated":{"line":1,"column":920}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":69,"column":54},"generated":{"line":1,"column":932}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":72,"column":24},"generated":{"line":1,"column":935}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":72,"column":34},"generated":{"line":1,"column":937}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":73,"column":29},"generated":{"line":1,"column":950}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":73,"column":40},"generated":{"line":1,"column":952}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":28},"generated":{"line":1,"column":959}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":39},"generated":{"line":1,"column":961}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":46},"generated":{"line":1,"column":966}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":50},"generated":{"line":1,"column":970}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":46},"generated":{"line":1,"column":972}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":63},"generated":{"line":1,"column":985}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":81},"generated":{"line":1,"column":1002}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":88},"generated":{"line":1,"column":1004}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":74,"column":98},"generated":{"line":1,"column":1014}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":31},"generated":{"line":1,"column":1027}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":31},"generated":{"line":1,"column":1029}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":31},"generated":{"line":1,"column":1036}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":59},"generated":{"line":1,"column":1064}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":69},"generated":{"line":1,"column":1066}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":81},"generated":{"line":1,"column":1077}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":84},"generated":{"line":1,"column":1079}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":87},"generated":{"line":1,"column":1081}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":76,"column":92},"generated":{"line":1,"column":1083}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":77,"column":29},"generated":{"line":1,"column":1095}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":77,"column":40},"generated":{"line":1,"column":1097}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":77,"column":45},"generated":{"line":1,"column":1102}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":77,"column":56},"generated":{"line":1,"column":1113}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":78,"column":28},"generated":{"line":1,"column":1135}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":78,"column":33},"generated":{"line":1,"column":1137}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":78,"column":44},"generated":{"line":1,"column":1148}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":80,"column":29},"generated":{"line":1,"column":1179}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":80,"column":40},"generated":{"line":1,"column":1181}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":80,"column":45},"generated":{"line":1,"column":1186}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":81,"column":28},"generated":{"line":1,"column":1207}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":81,"column":39},"generated":{"line":1,"column":1209}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":81,"column":44},"generated":{"line":1,"column":1214}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":81,"column":65},"generated":{"line":1,"column":1233}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":81,"column":69},"generated":{"line":1,"column":1237}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":81,"column":65},"generated":{"line":1,"column":1239}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":24},"generated":{"line":1,"column":1251}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":29},"generated":{"line":1,"column":1253}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":40},"generated":{"line":1,"column":1264}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":50},"generated":{"line":1,"column":1274}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":61},"generated":{"line":1,"column":1276}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":66},"generated":{"line":1,"column":1281}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":75},"generated":{"line":1,"column":1289}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":86},"generated":{"line":1,"column":1291}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":91},"generated":{"line":1,"column":1296}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":111},"generated":{"line":1,"column":1315}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":122},"generated":{"line":1,"column":1317}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":83,"column":127},"generated":{"line":1,"column":1322}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":27},"generated":{"line":1,"column":1333}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":27},"generated":{"line":1,"column":1335}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":27},"generated":{"line":1,"column":1342}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":55},"generated":{"line":1,"column":1370}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":65},"generated":{"line":1,"column":1372}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":75},"generated":{"line":1,"column":1382}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":92},"generated":{"line":1,"column":1398}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":95},"generated":{"line":1,"column":1400}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":98},"generated":{"line":1,"column":1402}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":87,"column":103},"generated":{"line":1,"column":1404}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":88,"column":25},"generated":{"line":1,"column":1416}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":88,"column":36},"generated":{"line":1,"column":1418}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":88,"column":44},"generated":{"line":1,"column":1426}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":88,"column":55},"generated":{"line":1,"column":1437}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":89,"column":24},"generated":{"line":1,"column":1459}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":89,"column":29},"generated":{"line":1,"column":1461}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":89,"column":40},"generated":{"line":1,"column":1472}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":91,"column":25},"generated":{"line":1,"column":1503}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":91,"column":36},"generated":{"line":1,"column":1505}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":91,"column":44},"generated":{"line":1,"column":1513}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":92,"column":24},"generated":{"line":1,"column":1534}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":92,"column":35},"generated":{"line":1,"column":1536}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":92,"column":43},"generated":{"line":1,"column":1544}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":92,"column":64},"generated":{"line":1,"column":1563}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":92,"column":68},"generated":{"line":1,"column":1567}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":92,"column":64},"generated":{"line":1,"column":1569}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":20},"generated":{"line":1,"column":1581}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":25},"generated":{"line":1,"column":1583}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":36},"generated":{"line":1,"column":1594}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":46},"generated":{"line":1,"column":1604}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":57},"generated":{"line":1,"column":1606}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":65},"generated":{"line":1,"column":1614}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":74},"generated":{"line":1,"column":1622}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":85},"generated":{"line":1,"column":1624}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":93},"generated":{"line":1,"column":1632}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":113},"generated":{"line":1,"column":1651}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":124},"generated":{"line":1,"column":1653}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":94,"column":132},"generated":{"line":1,"column":1661}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":1677}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":102,"column":11},"generated":{"line":1,"column":1684}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":102,"column":11},"generated":{"line":1,"column":1686}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":102,"column":11},"generated":{"line":1,"column":1696}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":102,"column":4},"generated":{"line":1,"column":1704}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":103,"column":13},"generated":{"line":1,"column":1715}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":103,"column":13},"generated":{"line":1,"column":1720}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":103,"column":25},"generated":{"line":1,"column":1732}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":103,"column":33},"generated":{"line":1,"column":1740}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":103,"column":34},"generated":{"line":1,"column":1749}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":104,"column":12},"generated":{"line":1,"column":1752}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":104,"column":14},"generated":{"line":1,"column":1754}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":106,"column":13},"generated":{"line":1,"column":1766}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":106,"column":13},"generated":{"line":1,"column":1771}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":106,"column":20},"generated":{"line":1,"column":1778}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":106,"column":36},"generated":{"line":1,"column":1794}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":106,"column":56},"generated":{"line":1,"column":1814}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":106,"column":63},"generated":{"line":1,"column":1821}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":106,"column":68},"generated":{"line":1,"column":1826}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":1843}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":1845}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":1848}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":1856}},{"source":"../../../../sourceES6/core/Cameras/XR/webXRInput.ts","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":1867}}],"sources":{"../../../../sourceES6/core/Cameras/XR/webXRInput.ts":"import { Nullable } from \"../../types\";\r\nimport { Observer } from \"../../Misc/observable\";\r\nimport { Matrix, Quaternion } from \"../../Maths/math\";\r\nimport { IDisposable, Scene } from \"../../scene\";\r\nimport { AbstractMesh } from \"../../Meshes/abstractMesh\";\r\nimport { WebXRExperienceHelper } from \"./webXRExperienceHelper\";\r\n/**\r\n * Represents an XR input\r\n */\r\nexport class WebXRController {\r\n    /**\r\n     * Represents the part of the controller that is held. This may not exist if the controller is the head mounted display itself, if thats the case only the pointer from the head will be availible\r\n     */\r\n    public grip?: AbstractMesh;\r\n    /**\r\n     * Pointer which can be used to select objects or attach a visible laser to\r\n     */\r\n    public pointer: AbstractMesh;\r\n\r\n    /**\r\n     * Creates the controller\r\n     * @see https://doc.babylonjs.com/how_to/webxr\r\n     * @param scene the scene which the controller should be associated to\r\n     */\r\n    constructor(scene: Scene) {\r\n        this.pointer = new AbstractMesh(\"controllerPointer\", scene);\r\n    }\r\n    /**\r\n     * Disposes of the object\r\n     */\r\n    dispose() {\r\n        if (this.grip) {\r\n            this.grip.dispose();\r\n        }\r\n        this.pointer.dispose();\r\n    }\r\n}\r\n\r\n/**\r\n * XR input used to track XR inputs such as controllers/rays\r\n */\r\nexport class WebXRInput implements IDisposable {\r\n    /**\r\n     * XR controllers being tracked\r\n     */\r\n    public controllers: Array<WebXRController> = [];\r\n    private _tmpMatrix = new Matrix();\r\n    private _frameObserver: Nullable<Observer<any>>;\r\n\r\n    /**\r\n     * Initializes the WebXRInput\r\n     * @param helper experience helper which the input should be created for\r\n     */\r\n    public constructor(private helper: WebXRExperienceHelper) {\r\n        this._frameObserver = helper._sessionManager.onXRFrameObservable.add(() => {\r\n            if (!helper._sessionManager._currentXRFrame || !helper._sessionManager._currentXRFrame.getDevicePose) {\r\n                return;\r\n            }\r\n\r\n            var xrFrame = helper._sessionManager._currentXRFrame;\r\n            var inputSources = helper._sessionManager._xrSession.getInputSources();\r\n\r\n            inputSources.forEach((input, i) => {\r\n                let inputPose = xrFrame.getInputPose(input, helper._sessionManager._frameOfReference);\r\n                if (inputPose) {\r\n                    if (this.controllers.length <= i) {\r\n                        this.controllers.push(new WebXRController(helper.container.getScene()));\r\n                    }\r\n                    var controller = this.controllers[i];\r\n\r\n                    // Manage the grip if it exists\r\n                    if (inputPose.gripMatrix) {\r\n                        if (!controller.grip) {\r\n                            controller.grip = new AbstractMesh(\"controllerGrip\", helper.container.getScene());\r\n                        }\r\n                        Matrix.FromFloat32ArrayToRefScaled(inputPose.gripMatrix, 0, 1, this._tmpMatrix);\r\n                        if (!controller.grip.getScene().useRightHandedSystem) {\r\n                            this._tmpMatrix.toggleModelMatrixHandInPlace();\r\n                        }\r\n                        if (!controller.grip.rotationQuaternion) {\r\n                            controller.grip.rotationQuaternion = new Quaternion();\r\n                        }\r\n                        this._tmpMatrix.decompose(controller.grip.scaling, controller.grip.rotationQuaternion, controller.grip.position);\r\n                    }\r\n\r\n                    // Manager pointer of controller\r\n                    Matrix.FromFloat32ArrayToRefScaled(inputPose.targetRay.transformMatrix, 0, 1, this._tmpMatrix);\r\n                    if (!controller.pointer.getScene().useRightHandedSystem) {\r\n                        this._tmpMatrix.toggleModelMatrixHandInPlace();\r\n                    }\r\n                    if (!controller.pointer.rotationQuaternion) {\r\n                        controller.pointer.rotationQuaternion = new Quaternion();\r\n                    }\r\n                    this._tmpMatrix.decompose(controller.pointer.scaling, controller.pointer.rotationQuaternion, controller.pointer.position);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Disposes of the object\r\n     */\r\n    public dispose() {\r\n        this.controllers.forEach((c) => {\r\n            c.dispose();\r\n        });\r\n        this.helper._sessionManager.onXRFrameObservable.remove(this._frameObserver);\r\n    }\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"79eff4c15226869400b592e10a70e827","cacheData":{"env":{}}}